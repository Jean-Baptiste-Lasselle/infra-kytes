#!/bin/bash

if [ -f ./liste-de-volumes-a-effacer.kytes ]; then rm -f ./liste-de-volumes-a-effacer.kytes; echo "deleted ./liste-de-volumes-a-effacer.kytes"; fi;
docker volume ls|grep -v VOLUME|awk '{print $2}' >> ./liste-de-volumes-a-effacer.kytes

export LISTE_VOLUMES_A_EFFACER=""
while read ID_VOLUME_DOCKER; do
  echo " KYTES => nettoyages volumes [$ID_VOLUME_DOCKER]"
  # docker volume rm $ID_VOLUME_DOCKER
  LISTE_VOLUMES_A_EFFACER="$LISTE_VOLUMES_A_EFFACER $ID_VOLUME_DOCKER"
done <liste-de-volumes-a-effacer.kytes

# echo " Voici la liste horizontale des volumes à effacer : " 
# echo " -------------------------------------------------- "
# echo "$LISTE_VOLUMES_A_EFFACER"
# echo " -------------------------------------------------- "

docker volume rm "$LISTE_VOLUMES_A_EFFACER"
